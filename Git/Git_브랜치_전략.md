# Git 브랜치 전략 (Git Flow)

Git은 분산 버전 관리 시스템으로 서로 다른 사람이 동시에 작업할 수 있습니다.

또한 신규 개발중이던 소스코드에서 버그 수정을 위해 브랜치를 이동하면 쉽게 버전 분리를 할 수 있습니다.

하지만 브랜치들이 항상 최신 버전의 상태를 유지하는것도 아니며 네이밍 룰이 없이 사용되면 잘못된 병합, 브랜치의 삭제가 발생할 수 있습니다.

main 브랜치 - 배포될 프로덕션 코드 내역을 병합하는 브랜치 입니다.

중요한 브랜치인 만큼 깃호스팅의 관리 페이지에서 메인테이너만 병합할 수 있도록 권한부여를 합니다.

release/${version} - 배포될 프로덕션 코드 내역을 병합하는 브랜치 입니다.

버전 파편화 시 (1.x 버전 , 2.x버전 등등) 버그 fix, 과거 호환을 유지하며 기능 추가/개선 등을 위해 사용되지만 파편화 없이 main 만으로도 버전이 관리된다면 태그가 있기 때문에 따로 release 브랜치를 사용하지 않는 경우도 있습니다.

main 과 비슷하게 사용되지만 해당 버전이 안정되면 더이상 커밋내역이 생기지 않습니다. (다음 버전 release 로 생성)

dev, devlop 브랜치 - 개발중인 커밋 내역을 병합합니다. 

fix/${버그분류}, hotfix 브랜치 - 배포 버전(main,release) 또는 개발버전(dev) 에서 버그가 발생할 경우 버그 수정을 수행하는 브랜치이며 변경내역은 모든 브랜치(main,release,dev) 에 병합되게 됩니다.

feat/${기능분류}, feature 브랜치 - 어떠한 기능 구현을 할때 사용하는 브랜치 입니다.
다른 작업과 충돌하지 않도록 하기 위해 dev 브랜치를 자주 끌어오고 반영합니다.

feat/login, feat/payment 등등 기능별로 브랜치 이름을 지정합니다.

작업 완료 후 dev 브랜치와 병합되면 삭제되는 브랜치 입니다.
또는 PR 요청 후 피드백을 수정하기 위해 브랜치를 남겨두기도 합니다.

# 태그
태그는 브랜치와 다르게 생성된 태그를 삭제 후 다시 생성하지 않는 이상  생성 당시 커밋을 가리키게 됩니다.

checkout 으로 해당 위치로 이동 할 수 있지만 브랜치처럼 작업을 커밋하여 새로운 커밋내역을 만들지 않습니다. (태그를 다시 생성할 경우 제외)

배포 후 버전관리 목적으로 main, release 브랜치의 HEAD 를 태그로 생성합니다.

# 배포 자동화
dev, devlop 브랜치로 PR 요청 시 병합 예정인 브랜치에 대해 병합 성공 여부와 테스트 코드 통과 등을 검토해서

병합을 사람이 검토하기 전 사전에 Reject 하거나 오랜기간 리뷰가 없으면 Merge 되도록 설정하는 케이스도 있습니다.

예) 공통 모듈이 수정되었지만 리뷰되지 않아 개발 일정에 영향을 주는 케이스의 경우 PR 발생시 메신저로 통보되며 3일 이상 리뷰가 없을 시 자동 병합

자동으로 검토하고 통과된 dev 브랜치를 내부에서 정한 스케줄러(하루 한번, 일주일 한번 등) 또는 트리거(병합) 발생시 개발 서버에 자동으로 배포하고 일정 기간 내부 테스트에서 버그 보고가 없으면 main 으로 병합